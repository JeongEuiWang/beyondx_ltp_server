# 데이터베이스 연결 디버깅 가이드

이 가이드는 서버 실행 시 데이터베이스 연결 문제를 진단하고 해결하는 방법을 설명합니다.

## 필수 패키지 설치

먼저 디버깅 스크립트 실행에 필요한 패키지를 설치합니다:

```
pip install python-dotenv
```

## 진단 과정

### 1. 환경 변수 설정 확인

환경 변수 파일(.env)이 올바르게 설정되어 있는지 확인합니다:

```
python env_check.py
```

이 스크립트는 다음을 수행합니다:
- 환경 변수 파일(.env, .env.dev 등)이 존재하는지 확인
- 데이터베이스 관련 환경 변수가 모두 설정되어 있는지 확인
- 현재 환경 모드(dev/prod) 확인

### 2. 데이터베이스 연결 테스트

데이터베이스 연결이 정상적으로 이루어지는지 테스트합니다:

```
python debug.py
```

이 스크립트는 다음을 수행합니다:
- 데이터베이스 연결 시도
- 연결이 성공하면 데이터베이스 버전과 현재 연결된 데이터베이스 정보 출력
- 테이블 목록 및 사용자 정보 출력
- 오류가 발생하면 상세 오류 메시지 표시

## 일반적인 문제 해결

1. **환경 변수 문제**: 
   - 환경 변수 파일이 존재하는지 확인
   - 모든 필수 데이터베이스 변수(DB_HOST, DB_PORT, DB_USER, DB_PASS, DB_NAME)가 올바르게 설정되어 있는지 확인
   - 환경 모드(ENV)가, 올바르게 설정되어 있는지 확인

2. **데이터베이스 연결 실패**:
   - MySQL 서버가 실행 중인지 확인
   - 호스트, 포트, 사용자 이름, 비밀번호가 올바른지 확인
   - 방화벽 설정 확인
   - MySQL 사용자에게 적절한 권한이 부여되어 있는지 확인

3. **테이블 문제**:
   - 데이터베이스는 연결되지만 테이블이 없는 경우 마이그레이션을 실행해야 할 수 있음
   - User 테이블이 존재하는지 확인
   - 테이블 구조가 애플리케이션 모델과 일치하는지 확인

## 데이터베이스 설정 예시

`.env` 또는 `.env.dev` 파일에 다음과 같이 설정해야 합니다:

```
# 환경 모드
ENV=dev

# 데이터베이스 설정
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASS=yourpassword
DB_NAME=your_database_name
``` 